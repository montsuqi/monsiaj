!目次

*配布物の内容
*ランチャーの起動方法
*設定項目について
*システムプロパティについて
*スタイルファイルについて
*プロキシについて

!配布物の内容

3種類の配布物があります。

*バイナリ配布物 monsiaj-bin-YYYYMMDD.zip
*バイナリ配布物(MacOS X アプリケーションバンドル版) monsiaj-bin-macos-YYYYMMDD.zip
*ソース配布物 monsiaj-src-YYYYMMDD.zip

YYYYMMDDは配布物作成の年月日を表します。

!!バイナリ配布物の内容

:README.txt, README.html:説明書(実行には不要)
:jmareceipt.jar:日レセ専用ランチャー
:pandaclient.jar:Javaクライアント本体(汎用ランチャーを含む)
:WebKit.jar, libwebkitsample.jnilib, libwebkitsample.jnilib.jar:MacOS Xで使用されるHTML表示モジュール(MacOS X以外では不要)
:log4j.jar:ログ出力モジュール(なくても実行可能)
:jmareceipt.jnlp:Java Web Start配備用サンプル設定ファイル(実行には不要)

!!バイナリ配布物(MacOS X アプリケーションバンドル版)の内容

:README.txt, README.html:説明書(実行には不要)
:JMAReceipt.app:日レセアプリケーションバンドル版

!!ソース配布物の内容

:README.txt, README.html:説明書(実行には不要)
:HOWTOBUILD.txt:ビルド方法の説明(実行には不要)
:src/ 以下のファイル:ソースコード
:libs/:各種ライブラリ
:resources/:画像や設定ファイルなど各種リソース
:build.xml:antでコンパイルを行うためのビルドファイル

!!ランチャーの起動方法

ランチャーを起動し、各種設定を行ってからランチャーの実行ボタンをクリックし、
アプリケーションを実行します。

ランチャーには日レセを起動するための専用ランチャーと他のアプリケーションの起動
にも使える汎用のランチャーがあります。

ファイルマネージャ(エクスプローラ、ファインダなど)から、ランチャー(jmareceipt.jar
またはpandaclient.jar)の置かれているディレクトリ(フォルダ)を開き、ランチャーの
jarファイルをダブルクリックして起動します。

!!!専用ランチャーを起動する場合
jmareceipt.jar のアイコンをダブルクリック。
!!!汎用ランチャーを起動する場合
pandaclient.jar のアイコンをダブルクリック。

起動の際には、配布されたjarファイルがすべて同一のディレクトリ(フォルダ)にある
必要があります。

!!設定項目について

ランチャーで各種設定を行うことが出来ます。
設定項目は３つのタブに分かれています。

!!!基本設定タブ

:ユーザー:ユーザー名を入力します。
:パスワード:パスワードを入力します。入力した文字の代わりに * が表示されます。
:パスワードを保存:チェックすると、パスワードをシステムに保存するようになります。暗号化は行わずそのまま保存するので、セキュリティの観点からは推奨されません。チェックを解除すると、今までシステムに保存していたパスワードは削除されます。
:ホスト:接続するホストを指定します。
:ポート:通信に使用するポート番号を指定します。通常は 8000 です。
アプリケーション:実行するアプリケーションを panda:アプリケーション名 の形式で指定します。日レセ専用ランチャーを使用した場合は、panda:orca00 から変更することはできません。

!!!SSLタブ

:SSLを使用:通信にSSLを使用する場合、チェックします。
:クライアント証明書:クライアント証明書ファイル(PKCS#12形式)を指定します。
:証明書パスワード:クライアント証明書のパスワードを入力します。
:証明書パスワードを保存:チェックすると、証明書パスワードをシステムに保存するようになります。注意点は基本設定タブのパスワードと同様です。

!!!その他の設定タブ

:スタイル:スタイルファイルを指定します。無指定時には内蔵のスタイルファイルが使用されます。
:エンコーディング:画面定義ファイルの文字エンコーディングを指定します。通常は EUC-JP です。日レセ専用ランチャーを使用した場合は EUC-JP から変更することはできません。
:ルック&フィール:画面の外見を指定します。最初に実行した際に、実行環境に合わせたもの(WindowsならWindows風など)が選択されていますが、他の物に変更しても問題ありません。
:プロトコルバージョン:通信プロトコルのバージョンを指定します。日レセの場合は、1です。それ以外の場合はアプリケーションごとに異なるので確認が必要です。日レセ専用ランチャーの場合、1から変更することはできません。
:ログビューワの使用:チェックしておくと、ログ表示ウィンドウがアイコン化された状態で現れます。不具合発生時に利用してください。
:追加システムプロパティ:必要に応じて、その他のプロパティを1行に1つの形式で記述します。

!! システムプロパティについて

ランチャーの「その他の設定」タブにある「追加システムプロパティ」欄に記述することで、
一部の動作をカスタマイズすることが出来ます。

書式は、
 プロパティ名=設定値
で、1行に1つずつ記述します。

!!!設定できるプロパティ
 
!!!!monsia.user.font
プログラム全体で使用するフォントを指定します。値は「フォント名-書体-サイズ」の形です。

フォントは、プラットフォーム共通のJava論理フォント名
(Serif/SansSerif/Monospaced/Dialog/DialogInput)、
もしくはプラットフォーム固有の物理フォント名を指定します。

書体はPLAIN/BOLD/ITALIC/BOLDITALIC(大文字小文字の区別はなし)のいずれかです。

サイズは整数で単位はポイントです。

例:セリフ付きの18ポイントフォントを使用する。
 monsia.user.font=Serif-PLAIN-18

!!!!monsia.user.font.XXX
特定の画面部品タイプ(ボタンなど)に固有のフォントを指定します。XXXの部分には
*button
*togglebutton
*radiobutton
*combobox
*tabbedpane
*label
*textfield
*table
が使用できます。

例:ボタンに14ポイント、ラベルに12ポイントのセリフ付きフォントを使用する。
 monsia.user.font.button=Serif-PLAIN-14
 monsia.user.font.label=Serif-PLAIN-12

monsia.user.fontよりも、これらの値の方が優先されます。

!!!!monsia.send.event.delay
入力しながら自動的に検索を絞り込む部分で、検索を開始するまでに待機する時間を指定します。
単位はミリ秒(1000分の1)です。

無指定時は1000(1秒)となっており、キー入力が1秒途絶えると検索が開始されます。

0にすると、自動検索は行わず、Enterを押した場合のみに検索します。

例:0.5秒で検索を開始する。
 monsia.send.event.delay=500
 
!!!!monsia.warn.certificate.expiration.before
クライアント証明書の有効期限切れの警告を行う日数を指定します。
単位は日です。

無指定時は30となっており、有効期限切れの30日前から警告が行われます。

例:有効期限切れの一週間前から警告を表示する。
 monsia.warn.certificate.expiration.before=7

!!!!monsia.logger.factory
ログ出力モジュールを変更します。
デバッグ用です。

!!スタイルファイルについて

スタイルファイルを独自に定義する場合、以下に従ってください。

!!!書式

Javaのプロパティファイルです。
以下のように指定します。

 スタイル名.font=フォント名-書体-サイズ
 スタイル名.fg=色指定
 スタイル名.bg=色指定

フォント名は monsia.user.font プロパティと同様の書式で指定できます。

色指定の値は # 記号に続けて色のRGB値を表す6桁の16進数を記述します。

fgの同義語としてかわりに foreground、
bgの同義語としてかわりに backgroundも使用できます。

!!!エンコーディングについて
Javaのプロパティファイルでは、仕様上、
プラットフォームネイティブな文字エンコーディングを出来ないので、
「ＭＳゴシック」のような非ASCII文字列を含む場合は、native2ascii
を使用して \uxxxx 形式に変換する必要があります。

!!プロキシについて

Webアクセスにプロキシが必要な環境では、以下の設定を行ってください。

!!!MacOS X以外の場合
「その他の設定」タブの「追加システムプロパティ」欄に以下の2行の内容を記述します。
 http.proxyHost=ホスト名
 http.proxyPort=ポート番号
(注) =の左側では、大文字と小文字は区別されます。

!!!MacOS Xの場合
#アップルメニュー→システム環境設定→ネットワーク を開きます。
#使用しているネットワークを選択します。
#設定...ボタンを押します。
#いちばん右の「プロキシ」タブを選択します。
#「プロキシの設定」で「手入力」を選択します。
#「設定するプロキシサーバを選択」リスト内の、□Webプロキシ (HTTP)にチェックを入れます。
#「Webプロキシサーバ」欄のホストとポートを記入します。
